<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Formulário de Pagamento</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .container {
            max-width: 800px;
            margin-top: 40px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1 { text-align: center; margin-bottom: 30px; }
    </style>
</head>
<body>
<div class="container">
    <!-- Cabeçalho dinâmico -->
    <h1>
        {% if categoria_header %}
            {{ categoria_header }} - Cadastro de Pagamento
        {% else %}
            Cadastro de Pagamento
        {% endif %}
    </h1>

    <form method="POST">
        <div class="row mb-3">
            <div class="col">
                <label>Clube:</label>
                <input type="text" name="clube" class="form-control" required>
            </div>
            <div class="col">
                <label>Igreja:</label>
                <input type="text" name="igreja" class="form-control" required>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col">
                <label>Região:</label>
                <select name="regiao" class="form-control" required>
                    <option value="">Selecione...</option>
                    <option value="Centro de Viana">Centro de Viana</option>
                    <option value="Sul de Viana">Sul de Viana</option>
                    <option value="Samba e Maianga">Samba e Maianga</option>
                    <option value="Zango e Icolo &amp; Bengo">Zango e Icolo &amp; Bengo</option>
                    <option value="Kilamba Kiaxe - A">Kilamba Kiaxe - A</option>
                    <option value="Kilamba Kiaxe - B">Kilamba Kiaxe - B</option>
                    <option value="Talatona Norte">Talatona Norte</option>
                    <option value="Talatona Sul">Talatona Sul</option>
                    <option value="Cabinda">Cabinda</option>
                </select>
            </div>
            <div class="col">
                <label>Categoria:</label>
                <select name="categoria" class="form-control" required>
                    <option value="">Selecione...</option>
                    <option value="Aventureiros">Aventureiros</option>
                    <option value="Desbravadores">Desbravadores</option>
                    <option value="Embaixadores">Embaixadores</option>
                    <option value="JA">JA</option>
                    <option value="Lideres">Líderes</option>
                </select>
            </div>
        </div>

        <!-- Total (calculado automaticamente) -->
        <div class="mb-3">
            <label>Total:</label>
            <input type="text" id="total" name="total" class="form-control" readonly required>
        </div>

        <!-- Meses -->
        <div class="row mb-3">
            <div class="col"><label>Janeiro:</label><input type="number" step="0.01" name="janeiro" class="form-control mes" value="0"></div>
            <div class="col"><label>Fevereiro:</label><input type="number" step="0.01" name="fevereiro" class="form-control mes" value="0"></div>
            <div class="col"><label>Março:</label><input type="number" step="0.01" name="marco" class="form-control mes" value="0"></div>
        </div>
        <div class="row mb-3">
            <div class="col"><label>Abril:</label><input type="number" step="0.01" name="abril" class="form-control mes" value="0"></div>
            <div class="col"><label>Maio:</label><input type="number" step="0.01" name="maio" class="form-control mes" value="0"></div>
            <div class="col"><label>Junho:</label><input type="number" step="0.01" name="junho" class="form-control mes" value="0"></div>
        </div>
        <div class="row mb-3">
            <div class="col"><label>Julho:</label><input type="number" step="0.01" name="julho" class="form-control mes" value="0"></div>
            <div class="col"><label>Agosto:</label><input type="number" step="0.01" name="agosto" class="form-control mes" value="0"></div>
            <div class="col"><label>Setembro:</label><input type="number" step="0.01" name="setembro" class="form-control mes" value="0"></div>
        </div>
        <div class="row mb-3">
            <div class="col"><label>Outubro:</label><input type="number" step="0.01" name="outubro" class="form-control mes" value="0"></div>
            <div class="col"><label>Novembro:</label><input type="number" step="0.01" name="novembro" class="form-control mes" value="0"></div>
            <div class="col"><label>Dezembro:</label><input type="number" step="0.01" name="dezembro" class="form-control mes" value="0"></div>
        </div>

        <!-- Botões -->
        <button type="submit" class="btn btn-success w-100 mb-2">Salvar</button>
        <a href="{{ url_for('listar') }}" class="btn btn-secondary w-100">Listar Pagamentos</a>
    </form>
</div>

<!-- Script para calcular automaticamente o total -->
<script>
    function calcularTotal() {
        let soma = 0;
        document.querySelectorAll(".mes").forEach(input => {
            let valor = parseFloat(input.value) || 0;
            soma += valor;
        });
        document.getElementById("total").value = soma.toFixed(2);
    }

    // Eventos
    document.querySelectorAll(".mes").forEach(input => {
        input.addEventListener("input", calcularTotal);
    });

    // Calcula total inicial
    calcularTotal();
</script>

</body>
</html>
